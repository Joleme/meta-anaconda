From 226166f2505b22dbeb32a0f91a673992c0b90e08 Mon Sep 17 00:00:00 2001
From: Hongxu Jia <hongxu.jia@windriver.com>
Date: Mon, 8 Apr 2019 13:48:48 +0800
Subject: [PATCH 1/2] disable chronyd

There is no chronyd services provides, the systemd in Yocto
has its own ntp

Upstream-Status: Inappropriate [oe specific]

Signed-off-by: Hongxu Jia <hongxu.jia@windriver.com>
---
 anaconda.py | 11 -----------
 1 file changed, 11 deletions(-)

diff --git a/anaconda.py b/anaconda.py
index c9e1632..766788e 100755
--- a/anaconda.py
+++ b/anaconda.py
@@ -743,17 +743,6 @@ if __name__ == "__main__":
     if geoloc.geoloc.enabled:
         geoloc.geoloc.refresh()
 
-    # setup ntp servers and start NTP daemon if not requested otherwise
-    if can_touch_runtime_system("start chronyd"):
-        kickstart_ntpservers = timezone_proxy.NTPServers
-
-        if kickstart_ntpservers:
-            pools, servers = ntp.internal_to_pools_and_servers(kickstart_ntpservers)
-            ntp.save_servers_to_config(pools, servers)
-
-        if timezone_proxy.NTPEnabled:
-            util.start_service("chronyd")
-
     # Finish the initialization of the setup on boot action.
     # This should be done sooner and somewhere else once it is possible.
     from pyanaconda.core.constants import SETUP_ON_BOOT_DEFAULT, SETUP_ON_BOOT_DISABLED
-- 
2.7.4

